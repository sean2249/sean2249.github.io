<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"weekly 04","datePublished":"2022-03-02T19:24:34+08:00","dateModified":"2022-03-02T19:24:34+08:00","author":{"@type":"Person","name":"Kiwi Lee","image":"https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6"},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/sean2249.github.io\/posts\/weekly-04\/"},"publisher":{"@type":"Organization","name":"Kiwi's Blog","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6"}},"description":"2022/02/20 ~ 2022/02/26; 只 git add 部份的 file changed/軟體工程師的閱讀書單/kubernetes 的元件簡易介紹/Reverse emoji in python is not what u think","keywords":["development, taiwan, python"]}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.81.0 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Kiwi Lee"><meta name=keywords content=",development,taiwan,python"><meta name=description content="2022/02/20 ~ 2022/02/26; 只 git add 部份的 file changed/軟體工程師的閱讀書單/kubernetes 的元件簡易介紹/Reverse emoji in python is not what u think"><meta property="og:description" content="2022/02/20 ~ 2022/02/26; 只 git add 部份的 file changed/軟體工程師的閱讀書單/kubernetes 的元件簡易介紹/Reverse emoji in python is not what u think"><meta property="og:type" content="article"><meta property="og:title" content="weekly 04"><meta name=twitter:title content="weekly 04"><meta property="og:url" content="https://sean2249.github.io/posts/weekly-04/"><meta property="twitter:url" content="https://sean2249.github.io/posts/weekly-04/"><meta property="og:site_name" content="Kiwi's Blog"><meta property="og:description" content="2022/02/20 ~ 2022/02/26; 只 git add 部份的 file changed/軟體工程師的閱讀書單/kubernetes 的元件簡易介紹/Reverse emoji in python is not what u think"><meta name=twitter:description content="2022/02/20 ~ 2022/02/26; 只 git add 部份的 file changed/軟體工程師的閱讀書單/kubernetes 的元件簡易介紹/Reverse emoji in python is not what u think"><meta property="og:locale" content="zh-tw"><meta property="article:published_time" content="2022-03-02T19:24:34"><meta property="article:modified_time" content="2022-03-02T19:24:34"><meta property="article:section" content="weekly"><meta property="article:tag" content="git"><meta property="article:tag" content="python"><meta property="article:tag" content="fastapi"><meta property="article:tag" content="software"><meta property="article:tag" content="pytest"><meta property="article:tag" content="testing"><meta property="article:tag" content="python class"><meta property="article:tag" content="kubernetes"><meta property="article:tag" content="python string"><meta property="article:tag" content="encoding"><meta property="article:tag" content="mock"><meta property="article:tag" content="postgresql"><meta property="article:tag" content="cgroups"><meta property="article:tag" content="middleware"><meta property="article:tag" content="design pattern"><meta property="article:tag" content="system structure"><meta name=twitter:card content="summary"><meta property="og:image" content="https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6?s=640"><meta property="twitter:image" content="https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6?s=640"><title>weekly 04</title><link rel=icon href=https://sean2249.github.io/favicon.png><link rel=canonical href=https://sean2249.github.io/posts/weekly-04/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://sean2249.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css></head><body><div id=blog><header id=header data-behavior=5><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://sean2249.github.io/ aria-label=去首頁>Kiwi's Blog</a></div><a class=header-right-picture href=https://sean2249.github.io/#about aria-label="打開鏈接: /#about"><img class=header-picture src="https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6?s=90" alt=作者的圖片></a></header><nav id=sidebar data-behavior=5><div class=sidebar-container><div class=sidebar-profile><a href=https://sean2249.github.io/#about aria-label=閱讀有關作者的更多信息><img class=sidebar-profile-picture src="https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6?s=110" alt=作者的圖片></a><h4 class=sidebar-profile-name>Kiwi Lee</h4><h5 class=sidebar-profile-bio>Python engineer/Devops</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://sean2249.github.io/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i><span class=sidebar-button-desc>首頁</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sean2249.github.io/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i><span class=sidebar-button-desc>分類</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sean2249.github.io/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i><span class=sidebar-button-desc>標籤</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sean2249.github.io/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i><span class=sidebar-button-desc>所有文章</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://sean2249.github.io/#about title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i><span class=sidebar-button-desc>關於</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sean2249 target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i><span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://medium.com/@sean22492249 target=_blank rel=noopener title=Medium><i class="sidebar-button-icon fab fa-lg fa-brands fa-medium" aria-hidden=true></i><span class=sidebar-button-desc>Medium</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=5 class=hasCoverMetaIn><article class=post id=top><div class="post-header main-content-wrap text-left"><h1 class=post-title>weekly 04</h1><div class="postShorten-meta post-meta"><time datetime=2022-03-02T19:24:34+08:00>三月 2, 2022</time>
<span>分類</span>
<a class=category-link href=https://sean2249.github.io/categories/weekly>weekly</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>這周把電腦的所有 tab 清空!!!!</p><ul><li><a href=#link>Link</a><ul><li><a href=#good>Good</a><ul><li><a href=#git-commit-only-part-of-a-file-in-git>[git] Commit only part of a file in git</a></li><li><a href=#python-which-string-formatting-method-should-you-use>[python] Which string formatting method should you use</a><ul><li><a href=#1-%E4%BD%BF%E7%94%A8->1. 使用 %</a></li><li><a href=#2-%E4%BD%BF%E7%94%A8-format>2. 使用 format</a></li><li><a href=#3-%E4%BD%BF%E7%94%A8-f-string>3. 使用 f-string</a></li><li><a href=#4-%E4%BD%BF%E7%94%A8-template-%E6%A5%B5%E5%B0%91%E8%A6%8B>4. 使用 Template (極少見)</a></li></ul></li><li><a href=#fastapi-%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84-fastapi-%E5%B0%88%E6%A1%88%E6%9E%B6%E6%A7%8B>[FastAPI] 官方提供的 fastapi 專案架構</a></li><li><a href=#software-software-engineer-roadmap-via-books>[software] Software Engineer roadmap via books</a><ul><li><a href=#1-%E5%BF%83%E6%B3%95>1. 心法</a></li><li><a href=#2-%E5%9F%BA%E7%A4%8E>2. 基礎</a></li><li><a href=#3-%E9%80%B2%E9%9A%8E>3. 進階</a></li><li><a href=#4-%E5%8F%8D%E8%A6%86%E9%96%B1%E8%AE%80>4. 反覆閱讀</a></li></ul></li><li><a href=#pytest-useful-pytest-command-line-options>[Pytest] Useful pytest command line options</a></li><li><a href=#python-class-provide-multiple-constructors-in-your-python-classes>[python class] Provide Multiple Constructors in Your Python Classes</a></li><li><a href=#kubernetes-a-guide-to-kubernetes-architecture>[kubernetes] A guide to Kubernetes architecture</a></li><li><a href=#python-stringencoding-why-cant-you-reverse-a-string-with-a-flag-emoji>[python string,encoding] Why Can’t You Reverse a String With a Flag Emoji?</a></li></ul></li><li><a href=#others>Others</a><ul><li><a href=#python-what-does--noqa-mean-in-python-comments>[python] What does &lsquo;# noqa&rsquo; mean in Python comments</a></li><li><a href=#mocktesting-mocking-a-class-used-in-a-with-statement>[mock,testing] Mocking a class used in a with statement</a></li><li><a href=#pythonpostgresql-psycopg2-where-in-statement-parameters>[python,postgresql] psycopg2 where in statement parameters</a></li><li><a href=#kubernetescgroups-%E7%AC%AC%E4%B8%80%E5%8D%83%E9%9B%B6%E4%B8%80%E7%AF%87%E7%9A%84-cgroups-%E4%BB%8B%E7%B4%B9>[kubernetes,cgroups] 第一千零一篇的 cgroups 介紹</a></li><li><a href=#fastapibackend-events-startup---shutdown>[FastAPI,backend] events: startup - shutdown</a></li><li><a href=#fastapibackendpython-request-body--path--query-parameters>[FastAPI,backend,python] Request body + path + query parameters</a></li><li><a href=#fastapi-body-with-multiple-examples>[FastAPI] <code>Body</code> with multiple <code>examples</code></a></li><li><a href=#fastapimiddleware-middleware>[FastAPI,middleware] middleware</a></li><li><a href=#design-pattern-wiki-%E4%B8%8A%E9%9D%A2%E7%9A%84-design-pattern>[design pattern] Wiki 上面的 design pattern</a></li><li><a href=#system-structure-uml>[system structure] UML</a></li><li><a href=#psycopg2-sqlstate-exception-classes>[psycopg2] Sqlstate exception classes</a></li></ul></li></ul></li><li><a href=#notes>Notes</a><ul><li><a href=#regular-expression-%E5%8F%96%E5%87%BA>Regular expression 取出</a></li><li><a href=#mock-setting-return-values-and-attributes>[Mock] setting return values and attributes</a><ul><li><a href=#set-function-return-value>set function return value</a></li><li><a href=#set-module-return-value>Set module return value</a></li><li><a href=#set-attribute-value>set attribute value</a></li><li><a href=#use-class-instance>use class instance</a></li></ul></li><li><a href=#fastapi-additional-responses-in-openapi>[FastAPI] Additional responses in OpenAPI</a></li></ul></li></ul><h1 id=link>Link</h1><h2 id=good>Good</h2><h3 id=git-commit-only-part-of-a-file-in-git>[git] Commit only part of a file in git</h3><p><a href=https://stackoverflow.com/questions/1085162/commit-only-part-of-a-file-in-git>https://stackoverflow.com/questions/1085162/commit-only-part-of-a-file-in-git</a></p><p><code>git add</code> 預設會將檔案有修改的地方都加入到 staging area，但有時會想分開成兩個 commit 上傳，或是針對另一個修改的地方做回復</p><p><code>git add --patch &lt;filename></code> 可以讓 git 針對每一塊修改的地方，讓你選擇要作為 commit 還是放棄作為 commit</p><p>而這篇就是在說明選項的全名是什麼XDDD 因為 git 裡面寫的是縮寫</p><h3 id=python-which-string-formatting-method-should-you-use>[python] Which string formatting method should you use</h3><p><a href=https://realpython.com/python-string-formatting/#which-string-formatting-method-should-you-use>https://realpython.com/python-string-formatting/#which-string-formatting-method-should-you-use</a></p><p>python string format 有四種</p><h4 id=1-使用->1. 使用 %</h4><p>從 C 的 prinft 導入過來的</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; name = 'bob'
&gt;&gt;&gt; 'hello %s' % name
hello bob
</code></pre><h4 id=2-使用-format>2. 使用 format</h4><p>這應該是 python3.5 前很常用的方法，不過很慢</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; name = 'bob'
&gt;&gt;&gt; 'hello {}'.format(name)
hello bob
</code></pre><h4 id=3-使用-f-string>3. 使用 f-string</h4><p>python3.6 導入，唯一推薦</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; name = 'bob'
&gt;&gt;&gt; f'hello {name}'
hello bob
</code></pre><h4 id=4-使用-template-極少見>4. 使用 Template (極少見)</h4><p>需要額外 import</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; from string import Template
&gt;&gt;&gt; t = Template('hello $name')
&gt;&gt;&gt; t.substitue(name=name)
hello bob
</code></pre><p>整體速度，印象中是 f-string > % > format > Template
Template 的好處在於可以給 user 定義句子，其他就沒了
正常上除了你的 python 小於 3.6，不然都一律推 f-string</p><h3 id=fastapi-官方提供的-fastapi-專案架構>[FastAPI] 官方提供的 fastapi 專案架構</h3><p><a href=https://github.com/tiangolo/full-stack-fastapi-postgresql>https://github.com/tiangolo/full-stack-fastapi-postgresql</a></p><p>包含了前端 Vue，後端 Fastapi，Database Postgres</p><h3 id=software-software-engineer-roadmap-via-books>[software] Software Engineer roadmap via books</h3><p><a href=https://medium.com/@iamjwr/software-engineer-roadmap-via-books-a6aabdc2589c>https://medium.com/@iamjwr/software-engineer-roadmap-via-books-a6aabdc2589c</a></p><h4 id=1-心法>1. 心法</h4><ol><li>The Passionate Programmer</li><li>Building a career in software</li></ol><h4 id=2-基礎>2. 基礎</h4><ul><li>Elements of Computing Systems</li><li>You Don’t Know JS</li></ul><h4 id=3-進階>3. 進階</h4><ul><li>Grokking Algorithms</li><li>Design Patterns</li><li>Test-Driven Development by Example</li><li>Clean Code</li></ul><h4 id=4-反覆閱讀>4. 反覆閱讀</h4><ul><li>Explain the Cloud Like I’m 10</li><li>System Design Interview</li><li>Designing Data-Intensive Applications</li><li>Domain-Driven Development Distilled</li></ul><h3 id=pytest-useful-pytest-command-line-options>[Pytest] Useful pytest command line options</h3><p><a href=https://www.thedigitalcatonline.com/blog/2018/07/05/useful-pytest-command-line-options/>https://www.thedigitalcatonline.com/blog/2018/07/05/useful-pytest-command-line-options/</a></p><p>主要是介紹 pytest skip 的功能</p><p>簡單的 skip，只要加上 decorator 即可</p><pre><code class="language-python=" data-lang="python=">@pytest.mark.skip
def test_a():
    ...
</code></pre><p>加入 reason，使 pytest 運行到此 test 會多印些資訊</p><pre><code class="language-python=" data-lang="python=">@pytest.mark.skip(reason='I want to skip')
def test_b():
    ...
</code></pre><p>加入條件判斷</p><pre><code class="language-python=" data-lang="python=">@pytest.mark.skipif(os.environ['AWS_REGION'] == 'us-west-2', reason='I want to skip')
def test_b():
    ...
</code></pre><p>標籤 test，可指定要跑跟不跑的</p><pre><code class="language-python=" data-lang="python=">@pytest.mark.slow
def test_slow():
    ...
</code></pre><p>下面指令會只運行有標註為 <code>slow</code> 的 test</p><pre><code class="language-shell=" data-lang="shell=">$ pytest -m slow
</code></pre><p>或是你不想運行 slow</p><pre><code class="language-shell=" data-lang="shell=">$ pytest -m 'not slow'
</code></pre><p>或是更華麗的，slow or fast 都跑</p><pre><code class="language-shell=" data-lang="shell=">$ pytest -m 'slow or fast'
</code></pre><p>上面都是針對 test function 來做，下面則是不同的方式 skip</p><p>跑到一半 skip</p><pre><code class="language-python=" data-lang="python=">def test_function():
    if not valid_config():
        pytest.skip(&quot;unsupported configuration&quot;)
</code></pre><p>載入 module 時，skip 整個 module</p><pre><code class="language-python=" data-lang="python=">import sys
import pytest

if not sys.platform.startswith(&quot;win&quot;):
    pytest.skip(&quot;skipping windows-only tests&quot;, allow_module_level=True)
</code></pre><h3 id=python-class-provide-multiple-constructors-in-your-python-classes>[python class] Provide Multiple Constructors in Your Python Classes</h3><p><a href=https://realpython.com/python-multiple-constructors/>https://realpython.com/python-multiple-constructors/</a></p><ul><li><code>__new__</code> object creation</li><li><code>__init__</code> object initialization</li><li>python 沒有直接支援 overloading (文中有寫原因)</li></ul><p><a href=https://stackoverflow.com/questions/6434482/python-function-overloading>Python function overloading</a>: 利用 module::multipledispatch 來實現</p><ul><li><code>__call__</code> 在實體化的直接呼叫</li></ul><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; class Person:
...     def __init__(self, name):
...         self.name = name
...         
...     def __call(self):
...         print(f&quot;I'm {self.name}&quot;)

&gt;&gt;&gt; person = Person('kiwi')
&gt;&gt;&gt; person()
I'm kiwi
</code></pre><p>文章接下來都是 classmethod 的介紹，可以參考一下，更可順便跟 staticmethod 做個比較</p><p><a href="https://docs.python.org/dev/library/stdtypes.html?highlight=strip#dict.fromkeys"><code>dict.fromkeys(iterable)</code></a> !! 在已知 key 的時候可以先設定 default value 產出新的 dictionary</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; names = ['Alice', 'Bob', 'Cindy']
&gt;&gt;&gt; bank_accounts = dict.fromkeys(names, 0)
&gt;&gt;&gt; bank_accounts
{'Alice': 0, 'Bob': 0, 'Cindy': 0}
</code></pre><p>還有其他 classmethod 在基本的 datatype，像是 int, float</p><p>datetime 也是一堆 classmethod</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; from datetime import date
&gt;&gt;&gt; from time import time

&gt;&gt;&gt; # Standard constructor
&gt;&gt;&gt; date(2022, 1, 13)
datetime.date(2022, 1, 13)

&gt;&gt;&gt; date.today()
datetime.date(2022, 1, 13)

&gt;&gt;&gt; date.fromtimestamp(1642110000)
datetime.date(2022, 1, 13)
&gt;&gt;&gt; date.fromtimestamp(time())
datetime.date(2022, 1, 13)

&gt;&gt;&gt; date.fromordinal(738168)
datetime.date(2022, 1, 13)

&gt;&gt;&gt; date.fromisoformat(&quot;2022-01-13&quot;)
datetime.date(2022, 1, 13)
</code></pre><p>看到了一個新潮的玩意兒: 在 python3.8 後，新增了 <code>@singledispatch</code> / <code>@singledispatchmethod</code> 在 functools</p><p>感覺實現了 overloading</p><pre><code class="language-python=" data-lang="python="># demo.py

from functools import singledispatchmethod

class DemoClass:
    @singledispatchmethod
    def generic_method(self, arg):
        print(f&quot;Do something with argument of type: {type(arg).__name__}&quot;)

    @generic_method.register
    def _(self, arg: int):
        print(&quot;Implementation for an int argument...&quot;)

    @generic_method.register(str)
    def _(self, arg):
        print(&quot;Implementation for a str argument...&quot;)
</code></pre><p>利用 <code>@singledispatchmethod</code> 做登記，代表此 method 是 default。接下來在用這個 method 當做 decorator 去 register 不同 argument type 的 method，當作 overloading</p><p>你可以直接標注格式在 register 內，或是用 type annotation</p><p>呼叫的感覺是</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; from demo import DemoClass

&gt;&gt;&gt; demo = DemoClass()

&gt;&gt;&gt; demo.generic_method(42)
Implementation for an int argument...

&gt;&gt;&gt; demo.generic_method(&quot;Hello, World!&quot;)
Implementation for a str argument...

&gt;&gt;&gt; demo.generic_method([1, 2, 3])
Do something with argument of type: list
</code></pre><p>Conclusion from website</p><ul><li>Simulate multiple constructors using optional arguments and type checking</li><li>Write multiple constructors using the built-in @classmethod decorator</li><li>Overload your class constructors using the @singledispatchmethod decorator</li></ul><h3 id=kubernetes-a-guide-to-kubernetes-architecture>[kubernetes] A guide to Kubernetes architecture</h3><p><a href="https://opensource.com/article/22/2/kubernetes-architecture?utm_medium=Email&utm_campaign=weekly&sc_cid=7013a000002qKBKAA2">https://opensource.com/article/22/2/kubernetes-architecture?utm_medium=Email&utm_campaign=weekly&sc_cid=7013a000002qKBKAA2</a></p><p>介紹 kubernetes 元件的架構，從中可以理解其核心，散落的 node，及如何優化調較對的方向</p><p>如果我一開始能看到這篇就省了很多路了，不過也有可能走了那些路，我才看得懂這篇 ヽ(✿ﾟ▽ﾟ)ノ</p><h3 id=python-stringencoding-why-cant-you-reverse-a-string-with-a-flag-emoji>[python string,encoding] Why Can’t You Reverse a String With a Flag Emoji?</h3><p><a href=https://davidamos.dev/why-cant-you-reverse-a-flag-emoji/>https://davidamos.dev/why-cant-you-reverse-a-flag-emoji/</a></p><p>從 &ldquo;🇺🇸&rdquo;[::-1] 的結果，反推到 unicode 在 python 的實作</p><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; &quot;🇺🇸&quot;[::-1]
🇸🇺
</code></pre><p>從上面的例子可發現 us flag 不是你想像中的單一字元，而是兩個字元合在一起。</p><p>接下來我們嘗試用 encode 的方式得到原生的 unicode，來避掉可能是不同編碼方式的錯誤 (ascii, utf-8, big5)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>&gt;&gt;&gt;</span> list(<span style=color:#e6db74>&#34;🇺🇸&#34;</span><span style=color:#f92672>.</span>encode())
[<span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>159</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>186</span>, <span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>159</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>184</span>]
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#75715e># ^^^^^^^^^^^^^^---Code point for 🇺</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#75715e>#                ^^^^^^^^^^^^^^^^^^---Code point for 🇸</span>

<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#75715e># The code points get swapped!</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> list(<span style=color:#e6db74>&#34;🇺🇸&#34;</span>[::<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>encode())
[<span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>159</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>184</span>, <span style=color:#ae81ff>240</span>, <span style=color:#ae81ff>159</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>186</span>]
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#75715e># ^^^^^^^^^^^^^^---Code point for 🇸</span>
<span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#75715e>#                ^^^^^^^^^^^^^^^^^^---Code point for 🇺</span>
</code></pre></div><p>成功的 encode 了，發現 us flag 總共分出了八個字元，四個為一組，才組成了 :us:。而在 reverse 中，是以一組為單位做 reverse，因此才導致 us -> su，而此 su 沒有辦法解析成 emoji 的格式，所以才跑出原生的兩個字</p><p>同理與中文字相同，中文的每個字也是多個字元為一組，但因為沒有像 emoji 一樣另外再轉一層查詢做圖片，所以才沒遇問題。</p><p>最後附上文中作者的整理</p><ul><li>Strings of symbols get converted to sequences of integers by a character encoding, usually UTF-8.</li><li>Some characters are encoded as a single 8-bit integer by UTF-8, and others require two, three, or four 8-bit integers.</li><li>Some symbols, such as flag emojis, are not directly encoded by Unicode. Instead, they are renders of sequences of Unicode characters and may or may not be supported by every platform.</li></ul><p>內文還有講到更多 bits 的</p><h2 id=others>Others</h2><h3 id=python-what-does--noqa-mean-in-python-comments>[python] What does &lsquo;# noqa&rsquo; mean in Python comments</h3><p><a href=https://stackoverflow.com/questions/45346575/what-does-noqa-mean-in-python-comments>https://stackoverflow.com/questions/45346575/what-does-noqa-mean-in-python-comments</a></p><p>noqa = NO-QA -> no quality assurance</p><p>linter 不會檢查這行 code 喔~ 像是 flake8</p><h3 id=mocktesting-mocking-a-class-used-in-a-with-statement>[mock,testing] Mocking a class used in a with statement</h3><p><a href=https://stackoverflow.com/questions/54634817/mocking-a-class-used-in-a-with-statement>https://stackoverflow.com/questions/54634817/mocking-a-class-used-in-a-with-statement</a></p><pre><code class="language-python=" data-lang="python=">with conn.cursor() as cursor:
    cursor.execute('select 1')
    if not cursor.rowcount:
        raise ValueError('No object found')
    result = cursor.fetchone()
</code></pre><p>第一個 return_value 取出 <code>conn.cursor()</code> 的回傳
第二個 return_value 則是 with statement 的內建函數 <code>__enter__</code> 裡的回傳項 <code>def __enter__(self)</code></p><pre><code class="language-python=" data-lang="python=">mock = Mock()
mock_cursor = mock.conn.cursor.return_value.__enter__.return_value
mock_cursor.rowcount = 1
mock_cursor.fetchone = ('a',)
</code></pre><h3 id=pythonpostgresql-psycopg2-where-in-statement-parameters>[python,postgresql] psycopg2 where in statement parameters</h3><p><a href=https://stackoverflow.com/questions/28117576/python-psycopg2-where-in-statement>https://stackoverflow.com/questions/28117576/python-psycopg2-where-in-statement</a></p><pre><code class="language-python=" data-lang="python=">data = ('UK', 'France')

sql = 'SELECT * FROM countries WHERE country in %s'
cur.execute(sql, (data,))
</code></pre><ol><li>使用 tuple 來傳遞 parameters</li><li>使用 <code>in %s</code> 不能用括號 <code>in (%s)</code> ，系統會以為 <code>(('UK', 'France'),)</code></li></ol><h3 id=kubernetescgroups-第一千零一篇的-cgroups-介紹>[kubernetes,cgroups] 第一千零一篇的 cgroups 介紹</h3><p><a href=https://medium.com/starbugs/%E7%AC%AC%E4%B8%80%E5%8D%83%E9%9B%B6%E4%B8%80%E7%AF%87%E7%9A%84-cgroups-%E4%BB%8B%E7%B4%B9-a1c5005be88c>https://medium.com/starbugs/%E7%AC%AC%E4%B8%80%E5%8D%83%E9%9B%B6%E4%B8%80%E7%AF%87%E7%9A%84-cgroups-%E4%BB%8B%E7%B4%B9-a1c5005be88c</a></p><p>對這個沒有很熟，但稍微強迫自己吸收點 (但下面就看不太懂了 ٩(ŏ﹏ŏ、)۶</p><ul><li>可限制控制隔離 process 所使用到的系統資源，例如 CPU, memory, Disk I/O, Network&mldr;等</li><li>Resource limiting, Prioritization, Accounting, Control</li><li>2006 process containers -> 2007 cgroups v1 -> 2016 cgroups v2</li><li>cgroups 沒有 API/library 的操作方式，是透過 Linux Virtual File System 實作，可像檔案系統一樣，透過新增修改刪除資料夾檔案來設定</li><li>請使用 systemd unit 來管理 cgroup，身為 linux distribution 預設的系統管理服務，也是大家熟悉習慣的，請使用它!</li></ul><h3 id=fastapibackend-events-startup---shutdown>[FastAPI,backend] events: startup - shutdown</h3><p><a href=https://fastapi.tiangolo.com/advanced/events/>https://fastapi.tiangolo.com/advanced/events/</a></p><pre><code class="language-python=" data-lang="python=">@app.on_event('startup')
async def startup_event():
    ...
</code></pre><p>在 application 正式運行前執行 (可以多個 startup event，requests 會等全部的 startup event 結束後才會開始接收)，像是連接 database 產生初始資料</p><pre><code class="language-python=" data-lang="python=">@app.on_event('shutdown')
def shutdown_event():
    with open('log.txt', mode='a') as log:
        log.write('Application shutdown')
</code></pre><p>在 application 被關閉後，可以做點像是清理 cache 或寫入紀錄。<br>上面的例子，是將關閉資訊寫入檔案，利用 <code>open()</code> 不支援 async/await，所有是使用 <code>def</code> 而不是 <code>async def</code></p><h3 id=fastapibackendpython-request-body--path--query-parameters>[FastAPI,backend,python] Request body + path + query parameters</h3><p><a href=https://fastapi.tiangolo.com/tutorial/body/#request-body-path-query-parameters>https://fastapi.tiangolo.com/tutorial/body/#request-body-path-query-parameters</a></p><pre><code class="language-python=" data-lang="python=">from typing import Optional

from fastapi import FastAPI
from pydantic import BaseModel


class Item(BaseModel):
    name: str
    description: Optional[str] = None
    price: float
    tax: Optional[float] = None


app = FastAPI()


@app.put(&quot;/items/{item_id}&quot;)
async def create_item(item_id: int, item: Item, q: Optional[str] = None):
    result = {&quot;item_id&quot;: item_id, **item.dict()}
    if q:
        result.update({&quot;q&quot;: q})
    return result
</code></pre><ul><li><code>{item_id}</code> 是 path parameter</li><li><code>q</code> query parameter (singular type)</li><li><code>item</code> 則是 pydantic model -> request body</li></ul><p><a href=https://fastapi.tiangolo.com/tutorial/body-multiple-params/#embed-a-single-body-parameter>https://fastapi.tiangolo.com/tutorial/body-multiple-params/#embed-a-single-body-parameter</a>
-> 使用 <code>Body</code> 來更完善 request body 的要求及 openapi 的 spec，像是 example</p><pre><code class="language-python=" data-lang="python=">class Item(BaseModel):
    name: str
    description: Optional[str] = None
    price: float
    tax: Optional[float] = None
    
@app.put(&quot;/items/{item_id}&quot;)
async def update_item(item_id: int, item: Item = Body(..., embed=True)):
    results = {&quot;item_id&quot;: item_id, &quot;item&quot;: item}
    return results
</code></pre><p>多加入 <code>embed=True</code></p><pre><code class="language-json=" data-lang="json=">{
    &quot;name&quot;: &quot;Foo&quot;,
    &quot;description&quot;: &quot;The pretender&quot;,
    &quot;price&quot;: 42.0,
    &quot;tax&quot;: 3.2
}
</code></pre><p>-> 變成需要額外加入 <code>item</code> 作為 key</p><pre><code class="language-json=" data-lang="json=">{
    &quot;item&quot;: {
        &quot;name&quot;: &quot;Foo&quot;,
        &quot;description&quot;: &quot;The pretender&quot;,
        &quot;price&quot;: 42.0,
        &quot;tax&quot;: 3.2
    }
}
</code></pre><h3 id=fastapi-body-with-multiple-examples>[FastAPI] <code>Body</code> with multiple <code>examples</code></h3><p><a href=https://fastapi.tiangolo.com/tutorial/schema-extra-example/#body-with-multiple-examples>https://fastapi.tiangolo.com/tutorial/schema-extra-example/#body-with-multiple-examples</a></p><p>fastapi 的 example 讓你可以在 swagger 上面，有些預設的 request body/parameter 可以選擇及參考~ 很方便</p><p>這邊講的 examples 不是單純指 body，還可以用在</p><ul><li>Path()</li><li>Query()</li><li>Header()</li><li>Cookie()</li><li>Body()</li><li>Form()</li><li>File()</li></ul><p>單一的 example: <code>example=&lt;你想要呈現的例子></code></p><pre><code class="language-python=" data-lang="python=">@app.put(&quot;/items/{item_id}&quot;)
async def update_item(
    item_id: int,
    item: Item = Body(
        ...,
        example={
            &quot;name&quot;: &quot;Foo&quot;,
            &quot;description&quot;: &quot;A very nice Item&quot;,
            &quot;price&quot;: 35.4,
            &quot;tax&quot;: 3.2,
        },
    ),
):
    results = {&quot;item_id&quot;: item_id, &quot;item&quot;: item}
    return results
</code></pre><p>多個 examples，你可以定義更多的資訊，甚至還有下拉選單!!</p><ul><li>summary: 下拉選單的選項名稱</li><li>description: 更詳細的描述，支援 markdown</li><li>value: 要當作 example 的值</li><li>externalValues: alternative to value, a URL pointing to the example. Although this might not be supported by as many tools as value.</li></ul><pre><code class="language-python=" data-lang="python=">@app.put(&quot;/items/{item_id}&quot;)
async def update_item(
    *,
    item_id: int,
    item: Item = Body(
        ...,
        examples={
            &quot;normal&quot;: {
                &quot;summary&quot;: &quot;A normal example&quot;,
                &quot;description&quot;: &quot;A **normal** item works correctly.&quot;,
                &quot;value&quot;: {
                    &quot;name&quot;: &quot;Foo&quot;,
                    &quot;description&quot;: &quot;A very nice Item&quot;,
                    &quot;price&quot;: 35.4,
                    &quot;tax&quot;: 3.2,
                },
            },
            &quot;converted&quot;: {
                &quot;summary&quot;: &quot;An example with converted data&quot;,
                &quot;description&quot;: &quot;FastAPI can convert price `strings` to actual `numbers` automatically&quot;,
                &quot;value&quot;: {
                    &quot;name&quot;: &quot;Bar&quot;,
                    &quot;price&quot;: &quot;35.4&quot;,
                },
            },
            &quot;invalid&quot;: {
                &quot;summary&quot;: &quot;Invalid data is rejected with an error&quot;,
                &quot;value&quot;: {
                    &quot;name&quot;: &quot;Baz&quot;,
                    &quot;price&quot;: &quot;thirty five point four&quot;,
                },
            },
        },
    ),
):
    results = {&quot;item_id&quot;: item_id, &quot;item&quot;: item}
    return results
</code></pre><h3 id=fastapimiddleware-middleware>[FastAPI,middleware] middleware</h3><p><a href=https://fastapi.tiangolo.com/tutorial/middleware/>https://fastapi.tiangolo.com/tutorial/middleware/</a></p><p>你可以客製自己的 middleware</p><pre><code class="language-python=" data-lang="python=">import time

from fastapi import FastAPI, Request

app = FastAPI()


@app.middleware(&quot;http&quot;)
async def add_process_time_header(request: Request, call_next):
    start_time = time.time()
    response = await call_next(request)
    process_time = time.time() - start_time
    response.headers[&quot;X-Process-Time&quot;] = str(process_time)
    return response

</code></pre><h3 id=design-pattern-wiki-上面的-design-pattern>[design pattern] Wiki 上面的 design pattern</h3><p><a href=https://en.wikipedia.org/wiki/Software_design_pattern#Classification_and_list>https://en.wikipedia.org/wiki/Software_design_pattern#Classification_and_list</a></p><p>發現 wiki 上面的還蠻完整的椰</p><h3 id=system-structure-uml>[system structure] UML</h3><p><a href=https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80>https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80</a></p><p>描述軟體專案架構</p><ul><li>class diagram <a href=https://zh.wikipedia.org/wiki/%E9%A1%9E%E5%88%A5%E5%9C%96>https://zh.wikipedia.org/wiki/%E9%A1%9E%E5%88%A5%E5%9C%96</a></li><li>sequence diagram <a href=https://zh.wikipedia.org/wiki/%E6%97%B6%E5%BA%8F%E5%9B%BE>https://zh.wikipedia.org/wiki/%E6%97%B6%E5%BA%8F%E5%9B%BE</a></li><li>use case diagram <a href=https://zh.wikipedia.org/wiki/%E7%94%A8%E4%BE%8B%E5%9B%BE>https://zh.wikipedia.org/wiki/%E7%94%A8%E4%BE%8B%E5%9B%BE</a></li></ul><h3 id=psycopg2-sqlstate-exception-classes>[psycopg2] Sqlstate exception classes</h3><p><a href=https://www.psycopg.org/docs/errors.html#sqlstate-exception-classes>https://www.psycopg.org/docs/errors.html#sqlstate-exception-classes</a></p><h1 id=notes>Notes</h1><h2 id=regular-expression-取出>Regular expression 取出</h2><pre><code class="language-python=" data-lang="python=">import re

match = re.match(r'[name|id]: [0-9]{1,5}', text)
if not match:
    print('no match')
else:
    end = match.span()[1]
    
</code></pre><h2 id=mock-setting-return-values-and-attributes>[Mock] setting return values and attributes</h2><h3 id=set-function-return-value>set function return value</h3><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; mock = Mock()
&gt;&gt;&gt;mock.return_value = 5
&gt;&gt;&gt; mock()
5
</code></pre><h3 id=set-module-return-value>Set module return value</h3><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; mock = Mock()
&gt;&gt;&gt; mock.method.return_value = 5
&gt;&gt;&gt; mock.method()
5
</code></pre><h3 id=set-attribute-value>set attribute value</h3><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; mock = Mock()
&gt;&gt;&gt; mock.x = 5
&gt;&gt;&gt; mock.x
5
</code></pre><h3 id=use-class-instance>use class instance</h3><ol><li>實體化</li></ol><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; mock = Mock()
&gt;&gt;&gt; cursor = mock.connect.cursor.return_value
</code></pre><pre><code class="language-python=" data-lang="python=">cursor = connect.cursor()
</code></pre><ol start=2><li>針對實體化的物件</li></ol><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; mock = Mock()
&gt;&gt;&gt; cursor = mock.connect.cursor.return_value
&gt;&gt;&gt; cursor.execute.return_value = ['foo']
&gt;&gt;&gt; cursor.rowcount = 3
</code></pre><pre><code class="language-python=" data-lang="python=">&gt;&gt;&gt; cursor = connect.cursor()
&gt;&gt;&gt; cursor.execute('select 1')
['foo']
&gt;&gt;&gt; cursor.rowcount
3
</code></pre><h2 id=fastapi-additional-responses-in-openapi>[FastAPI] Additional responses in OpenAPI</h2><p><a href=https://fastapi.tiangolo.com/advanced/additional-responses/>https://fastapi.tiangolo.com/advanced/additional-responses/</a></p><pre><code class="language-python=" data-lang="python=">from fastapi import FastAPI
from fastapi.responses import JSONResponse
from pydantic import BaseModel


class Item(BaseModel):
    id: str
    value: str


class Message(BaseModel):
    message: str


app = FastAPI()


@app.get(&quot;/items/{item_id}&quot;, response_model=Item, responses={404: {&quot;model&quot;: Message}})
async def read_item(item_id: str):
    if item_id == &quot;foo&quot;:
        return {&quot;id&quot;: &quot;foo&quot;, &quot;value&quot;: &quot;there goes my hero&quot;}
    else:
        return JSONResponse(status_code=404, content={&quot;message&quot;: &quot;Item not found&quot;})
</code></pre><p><code>@app.get(..., responses)</code> 定義 model 時，可以利用 content 的 keyword parameter 來塞入 pydantic model 作為輸出的格式，同時也會顯示在 openapi swagger 上面。</p><p>如果不想要那麼麻煩，就寫個 description 來描述該狀態的錯誤</p><blockquote><p>至於 httpexceptions / jsonresponse 不知道有什麼差別 QQ 可能一個是用 raise?</p></blockquote></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">標籤</span><br><a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/git/>git</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/python/>python</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/fastapi/>fastapi</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/software/>software</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/pytest/>pytest</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/testing/>testing</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/python-class/>python class</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/kubernetes/>kubernetes</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/python-string/>python string</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/encoding/>encoding</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/mock/>mock</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/postgresql/>postgresql</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/cgroups/>cgroups</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/middleware/>middleware</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/design-pattern/>design pattern</a>
<a class="tag tag--primary tag--small" href=https://sean2249.github.io/tags/system-structure/>system structure</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sean2249.github.io/posts/weekly-05/ data-tooltip="weekly 05" aria-label="下一篇: weekly 05"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">下一篇</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sean2249.github.io/posts/weekly-03/ data-tooltip="weekly 03" aria-label="上一篇: weekly 03"><span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=分享這個帖子><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://sean2249.github.io/posts/weekly-04/" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://sean2249.github.io/posts/weekly-04/" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://sean2249.github.io/posts/weekly-04/" title="分享到 Linkedin" aria-label="分享到 Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label=發表評論><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=回到頂部><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div><div id=disqus_thread><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div><script type=text/javascript>var disqus_config=function(){this.page.url='https://sean2249.github.io/posts/weekly-04/',this.page.identifier='/posts/weekly-04/'};(function(){var a,b;if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='hugo-tranquilpeak-theme',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2022 Kiwi Lee. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=5><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sean2249.github.io/posts/weekly-05/ data-tooltip="weekly 05" aria-label="下一篇: weekly 05"><i class="fa fa-angle-left"></i><span class="hide-xs hide-sm text-small icon-ml">下一篇</span></a></li><li class=post-action><a class="post-action-btn btn btn--default tooltip--top" href=https://sean2249.github.io/posts/weekly-03/ data-tooltip="weekly 03" aria-label="上一篇: weekly 03"><span class="hide-xs hide-sm text-small icon-mr">上一篇</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions aria-label=分享這個帖子><i class="fa fa-share-alt" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://sean2249.github.io/posts/weekly-04/" title="分享到 Facebook" aria-label="分享到 Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://sean2249.github.io/posts/weekly-04/" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https://sean2249.github.io/posts/weekly-04/" title="分享到 Linkedin" aria-label="分享到 Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#disqus_thread aria-label=發表評論><i class="far fa-comment"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#top aria-label=回到頂部><i class="fa fa-arrow-up" aria-hidden=true></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=5><i id=btn-close-shareoptions class="fa fa-times"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fsean2249.github.io%2Fposts%2Fweekly-04%2F" aria-label="分享到 Facebook"><i class="fab fa-facebook-square" aria-hidden=true></i><span>分享到 Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fsean2249.github.io%2Fposts%2Fweekly-04%2F" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden=true></i><span>分享到 Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fsean2249.github.io%2Fposts%2Fweekly-04%2F" aria-label="分享到 Linkedin"><i class="fab fa-linkedin" aria-hidden=true></i><span>分享到 Linkedin</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src="https://www.gravatar.com/avatar/0d1e46158977211ef53c1d7c007415f6?s=110" alt=作者的圖片><h4 id=about-card-name>Kiwi Lee</h4><div id=about-card-bio>Python engineer/Devops</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Devops engineer</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Taiwan</div></div></div><div id=cover style=background-image:url(https://sean2249.github.io/images/cover.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://sean2249.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script><script async crossorigin=anonymous defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js></script><script async crossorigin=anonymous defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js></script><script async crossorigin=anonymous defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js></script><script async crossorigin=anonymous defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js></script><script async crossorigin=anonymous defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js></script><script async crossorigin=anonymous defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js></script><script async crossorigin=anonymous defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js></script><script async crossorigin=anonymous defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js></script><script async crossorigin=anonymous defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js></script><script async crossorigin=anonymous defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js></script><script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$('pre.code-highlight > code, pre > code').each(function(b,a){$(this).hasClass('codeblock')||$(this).addClass('codeblock'),hljs.highlightBlock(a)})})</script></body></html>